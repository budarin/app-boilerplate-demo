import{r as e,t}from"./rolldown-runtime-BHJ7HXw7.js";import{i as n,r}from"./react-Cawi1mdu.js";const i=(e,t=`Попытка обратиться к неинициализированному сервису:`)=>{let n=()=>{throw Error(`${t} ${e}`)};return new Proxy(()=>{},{get:n,apply:n})};var a=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},o=(e=>e?a(e):a),s=e(n(),1),c=e=>e;function l(e,t=c){let n=s.useSyncExternalStore(e.subscribe,s.useCallback(()=>t(e.getState()),[e,t]),s.useCallback(()=>t(e.getInitialState()),[e,t]));return s.useDebugValue(n),n}var u=e=>{let t=o(e),n=e=>l(t,e);return Object.assign(n,t),n},d=(e=>e?u(e):u),f=e(r(),1),p=24,m=null,h=new Set,g=`@budarin/svg-sprite-container`,_=`http://www.w3.org/2000/svg`,v=`position: absolute; width: 0; height: 0; overflow: hidden;`;function y(e){m=e}function b({url:e,size:t=p,...n}){let r=e;return(0,s.useEffect)(()=>{if(h.has(r))return;h.add(r);let t=document.getElementById(g);if(!t){t=document.createElementNS(_,`svg`),t.id=g,t.style=v,t.setAttribute(`aria-hidden`,`true`),t.setAttribute(`xmlns`,_);let e=document.createElementNS(_,`defs`);t.appendChild(e),document.body.insertBefore(t,document.body.firstChild)}fetch(e).then(t=>{if(!t.ok)throw Error(`HTTP ${t.status}: ${t.statusText}`);let n=t.headers.get(`content-type`);if(!n||!n.match(/svg|xml/i))throw Error(`Ожидался SVG/XML, но получен "${n}" для ${e}`);return t.text()}).then(n=>{let i=new DOMParser().parseFromString(n,`image/svg+xml`),a=i.querySelector(`parsererror`);if(a)throw Error(`Ошибка парсинга SVG: ${a.textContent}`);let o=i.querySelector(`svg`);if(!o)throw Error(`<svg> элемент не найден в ${e}`);let s=document.createElementNS(_,`symbol`);s.id=r,s.setAttribute(`fill`,`currentColor`);let c=o.getAttribute(`viewBox`);for(c&&s.setAttribute(`viewBox`,c);o.firstChild;)s.appendChild(o.firstChild);(t?.querySelector(`defs`))?.appendChild(s)}).catch(t=>{m?m(t,e):console.error(`Не удалось загрузить иконку ${e}:`,t)}).finally(()=>{h.delete(r)})},[r,e]),(0,f.jsx)(`svg`,{"aria-hidden":`true`,width:t,height:t,...n,children:(0,f.jsx)(`use`,{href:`#${r}`})})}
/**
* uuidv7: A JavaScript implementation of UUID version 7
*
* Copyright 2021-2024 LiosK
*
* @license Apache-2.0
* @packageDocumentation
*/
var x=`0123456789abcdef`,S=class e{constructor(e){this.bytes=e}static ofInner(t){if(t.length!==16)throw TypeError(`not 128-bit length`);return new e(t)}static fromFieldsV7(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw RangeError(`invalid field value`);let a=new Uint8Array(16);return a[0]=t/2**40,a[1]=t/2**32,a[2]=t/2**24,a[3]=t/2**16,a[4]=t/2**8,a[5]=t,a[6]=112|n>>>8,a[7]=n,a[8]=128|r>>>24,a[9]=r>>>16,a[10]=r>>>8,a[11]=r,a[12]=i>>>24,a[13]=i>>>16,a[14]=i>>>8,a[15]=i,new e(a)}static parse(t){let n;switch(t.length){case 32:n=/^[0-9a-f]{32}$/i.exec(t)?.[0];break;case 36:n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t)?.slice(1,6).join(``);break;case 38:n=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t)?.slice(1,6).join(``);break;case 45:n=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t)?.slice(1,6).join(``);break;default:break}if(n){let t=new Uint8Array(16);for(let e=0;e<16;e+=4){let r=parseInt(n.substring(2*e,2*e+8),16);t[e+0]=r>>>24,t[e+1]=r>>>16,t[e+2]=r>>>8,t[e+3]=r}return new e(t)}else throw SyntaxError(`could not parse UUID string`)}toString(){let e=``;for(let t=0;t<this.bytes.length;t++)e+=x.charAt(this.bytes[t]>>>4),e+=x.charAt(this.bytes[t]&15),(t===3||t===5||t===7||t===9)&&(e+=`-`);return e}toHex(){let e=``;for(let t=0;t<this.bytes.length;t++)e+=x.charAt(this.bytes[t]>>>4),e+=x.charAt(this.bytes[t]&15);return e}toJSON(){return this.toString()}getVariant(){let e=this.bytes[8]>>>4;if(e<0)throw Error(`unreachable`);if(e<=7)return this.bytes.every(e=>e===0)?`NIL`:`VAR_0`;if(e<=11)return`VAR_10`;if(e<=13)return`VAR_110`;if(e<=15)return this.bytes.every(e=>e===255)?`MAX`:`VAR_RESERVED`;throw Error(`unreachable`)}getVersion(){return this.getVariant()===`VAR_10`?this.bytes[6]>>>4:void 0}clone(){return new e(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(let t=0;t<16;t++){let n=this.bytes[t]-e.bytes[t];if(n!==0)return Math.sign(n)}return 0}},C=class{constructor(e){this.timestamp=0,this.counter=0,this.random=e??w()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let n=this.generateOrAbortCore(e,t);return n===void 0&&(this.timestamp=0,n=this.generateOrAbortCore(e,t)),n}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<1||e>0xffffffffffff)throw RangeError("`unixTsMs` must be a 48-bit positive integer");if(t<0||t>0xffffffffffff)throw RangeError("`rollbackAllowance` out of reasonable range");if(e>this.timestamp)this.timestamp=e,this.resetCounter();else if(e+t>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return S.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){let e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,S.ofInner(e)}},w=()=>{if(typeof crypto<`u`&&crypto.getRandomValues!==void 0)return new T;if(typeof UUIDV7_DENY_WEAK_RNG<`u`&&UUIDV7_DENY_WEAK_RNG)throw Error(`no cryptographically strong RNG available`);return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}},T=class{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}},E;const D=()=>O().toString(),O=()=>(E||=new C).generate();var k=`x-request-id`,A=`application/json; charset=utf-8`;function j(e){return`id`in e&&`result`in e&&!(`error`in e)}function M(e){return`id`in e&&`error`in e&&!(`result`in e)}function N(e){if(j(e))return!0;if(M(e)){let{error:t}=e;return typeof t.code==`number`&&typeof t.message==`string`&&(`data`in t?typeof t.data==`object`:!0)&&(`stack`in t?typeof t.stack==`string`:!0)}return!1}const P=e=>async t=>{let n=t.body.id;try{let r=await fetch(`${e}/${t.body.method}`,{...t,mode:`same-origin`,method:`POST`,body:JSON.stringify(t.body),headers:{...t?.headers,[k]:String(n),"content-type":A,accept:A}});if(r.ok===!1)return{id:n,error:{code:r.status,message:r.statusText}};let i=await r.json();if(!N(i))throw Error(`Структура данных в ответе сервера не соответствует формату JSON-RPC`);return i}catch(e){return{id:n,error:{code:-1,message:e.message,stack:e.stack}}}};function F(e){return e.replace(/([A-Z])/g,e=>`_${e.toLowerCase()}`)}const I=(e,t)=>new Proxy({},{get(n,r){return async n=>e({body:{id:t(),method:F(r),...n!==void 0&&{params:n}}})}});var L=t(((e,t)=>{function n(e){try{return JSON.stringify(e)}catch{return`"[Circular]"`}}t.exports=r;function r(e,t,r){var i=r&&r.stringify||n,a=1;if(typeof e==`object`&&e){var o=t.length+a;if(o===1)return e;var s=Array(o);s[0]=i(e);for(var c=1;c<o;c++)s[c]=i(t[c]);return s.join(` `)}if(typeof e!=`string`)return e;var l=t.length;if(l===0)return e;for(var u=``,d=1-a,f=-1,p=e&&e.length||0,m=0;m<p;){if(e.charCodeAt(m)===37&&m+1<p){switch(f=f>-1?f:0,e.charCodeAt(m+1)){case 100:case 102:if(d>=l||t[d]==null)break;f<m&&(u+=e.slice(f,m)),u+=Number(t[d]),f=m+2,m++;break;case 105:if(d>=l||t[d]==null)break;f<m&&(u+=e.slice(f,m)),u+=Math.floor(Number(t[d])),f=m+2,m++;break;case 79:case 111:case 106:if(d>=l||t[d]===void 0)break;f<m&&(u+=e.slice(f,m));var h=typeof t[d];if(h===`string`){u+=`'`+t[d]+`'`,f=m+2,m++;break}if(h===`function`){u+=t[d].name||`<anonymous>`,f=m+2,m++;break}u+=i(t[d]),f=m+2,m++;break;case 115:if(d>=l)break;f<m&&(u+=e.slice(f,m)),u+=String(t[d]),f=m+2,m++;break;case 37:f<m&&(u+=e.slice(f,m)),u+=`%`,f=m+2,m++,d--;break}++d}++m}return f===-1?e:(f<p&&(u+=e.slice(f)),u)}})),R=e(t(((e,t)=>{var n=L();t.exports=f;var r=M().console||{},i={mapHttpRequest:T,mapHttpResponse:T,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:T,res:T,err:C,errWithCause:C};function a(e,t){return e===`silent`?1/0:t.levels.values[e]}var o=Symbol(`pino.logFuncs`),s=Symbol(`pino.hierarchy`),c={error:`log`,fatal:`error`,warn:`error`,info:`log`,debug:`log`,trace:`log`};function l(e,t){t[s]={logger:t,parent:e[s]}}function u(e,t,n){let i={};t.forEach(e=>{i[e]=n[e]?n[e]:r[e]||r[c[e]||`log`]||D}),e[o]=i}function d(e,t){return Array.isArray(e)?e.filter(function(e){return e!==`!stdSerializers.err`}):e===!0?Object.keys(t):!1}function f(e){e||={},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!=`function`)throw Error(`pino: transmit option must have a send function`);let n=e.browser.write||r;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},o=d(e.browser.serialize,i),s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf(`!stdSerializers.err`)>-1&&(s=!1);let c=Object.keys(e.customLevels||{}),f=[`error`,`fatal`,`warn`,`info`,`debug`,`trace`].concat(c);typeof n==`function`&&f.forEach(function(e){n[e]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level=`silent`);let m=e.level||`info`,h=Object.create(n);h.log||=D,u(h,f,n),l({},h),Object.defineProperty(h,`levelVal`,{get:v}),Object.defineProperty(h,`level`,{get:y,set:x});let _={transmit:t,serialize:o,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:f,timestamp:w(e),messageKey:e.messageKey||`msg`,onChild:e.onChild||D};h.levels=p(e),h.level=m,h.isLevelEnabled=function(e){return this.levels.values[e]?this.levels.values[e]>=this.levels.values[this.level]:!1},h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=D,h.serializers=i,h._serialize=o,h._stdErrSerialize=s,h.child=function(...e){return C.call(this,_,...e)},t&&(h._logEvent=S());function v(){return a(this.level,this)}function y(){return this._level}function x(e){if(e!==`silent`&&!this.levels.values[e])throw Error(`unknown level `+e);this._level=e,g(this,_,h,`error`),g(this,_,h,`fatal`),g(this,_,h,`warn`),g(this,_,h,`info`),g(this,_,h,`debug`),g(this,_,h,`trace`),c.forEach(e=>{g(this,_,h,e)})}function C(n,r,a){if(!r)throw Error(`missing bindings for child Pino`);a||={},o&&r.serializers&&(a.serializers=r.serializers);let s=a.serializers;if(o&&s){var c=Object.assign({},i,s),u=e.browser.serialize===!0?Object.keys(c):o;delete r.serializers,b([r],u,c,this._stdErrSerialize)}function d(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,c&&(this.serializers=c,this._serialize=u),t&&(this._logEvent=S([].concat(e._logEvent.bindings,r)))}d.prototype=this;let f=new d(this);return l(this,f),f.child=function(...e){return C.call(this,n,...e)},f.level=a.level||this.level,n.onChild(f),f}return h}function p(e){let t=e.customLevels||{};return{values:Object.assign({},f.levels.values,t),labels:Object.assign({},f.levels.labels,m(t))}}function m(e){let t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:`trace`,20:`debug`,30:`info`,40:`warn`,50:`error`,60:`fatal`}},f.stdSerializers=i,f.stdTimeFunctions=Object.assign({},{nullTime:O,epochTime:k,unixTime:A,isoTime:j});function h(e){let t=[];e.bindings&&t.push(e.bindings);let n=e[s];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function g(e,t,n,r){if(Object.defineProperty(e,r,{value:a(e.level,n)>a(r,n)?D:n[o][r],writable:!0,enumerable:!0,configurable:!0}),e[r]===D){if(!t.transmit)return;let i=a(t.transmit.level||e.level,n);if(a(r,n)<i)return}e[r]=v(e,t,n,r);let i=h(e);i.length!==0&&(e[r]=_(i,e[r]))}function _(e,t){return function(){return t.apply(this,[...e,...arguments])}}function v(e,t,n,i){return(function(o){return function(){let s=t.timestamp(),c=Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===r?r:this;for(var u=0;u<c.length;u++)c[u]=arguments[u];var d=!1;if(t.serialize&&(b(c,this._serialize,this.serializers,this._stdErrSerialize),d=!0),t.asObject||t.formatters?o.call(l,...y(this,i,c,s,t)):o.apply(l,c),t.transmit){let r=t.transmit.level||e._level,o=a(r,n),l=a(i,n);if(l<o)return;x(this,{ts:s,methodLevel:i,methodValue:l,transmitLevel:r,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,n)},c,d)}}})(e[o][i])}function y(e,t,r,i,a){let{level:o,log:s=e=>e}=a.formatters||{},c=r.slice(),l=c[0],u={},d=(e._childLevel|0)+1;if(d<1&&(d=1),i&&(u.time=i),o){let n=o(t,e.levels.values[t]);Object.assign(u,n)}else u.level=e.levels.values[t];if(a.asObjectBindingsOnly){if(typeof l==`object`&&l)for(;d--&&typeof c[0]==`object`;)Object.assign(u,c.shift());return[s(u),...c]}else{if(typeof l==`object`&&l){for(;d--&&typeof c[0]==`object`;)Object.assign(u,c.shift());l=c.length?n(c.shift(),c):void 0}else typeof l==`string`&&(l=n(c.shift(),c));return l!==void 0&&(u[a.messageKey]=l),[s(u)]}}function b(e,t,n,r){for(let i in e)if(r&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]==`object`&&!Array.isArray(e[i])&&t)for(let r in e[i])t.indexOf(r)>-1&&r in n&&(e[i][r]=n[r](e[i][r]))}function x(e,t,n,r=!1){let i=t.send,a=t.ts,o=t.methodLevel,s=t.methodValue,c=t.val,l=e._logEvent.bindings;r||b(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=n.filter(function(e){return l.indexOf(e)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=s,i(o,e._logEvent,c),e._logEvent=S(l)}function S(e){return{ts:0,messages:[],bindings:e||[],level:{label:``,value:0}}}function C(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let n in e)t[n]===void 0&&(t[n]=e[n]);return t}function w(e){return typeof e.timestamp==`function`?e.timestamp:e.timestamp===!1?O:k}function T(){return{}}function E(e){return e}function D(){}function O(){return!1}function k(){return Date.now()}function A(){return Math.round(Date.now()/1e3)}function j(){return new Date(Date.now()).toISOString()}function M(){function e(e){return e!==void 0&&e}try{return typeof globalThis<`u`||Object.defineProperty(Object.prototype,`globalThis`,{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f,t.exports.pino=f}))(),1),z=()=>{},B=class e{endpoint;pinoInstance;logLevel=`info`;uuidGenerator;constructor(e,t,n=void 0,r=void 0){if(this.endpoint=e,this.uuidGenerator=t,r)this.pinoInstance=r;else{let t=(0,R.default)({formatters:{level:e=>({level:e.toUpperCase()})},browser:{serialize:!1,asObject:!1,transmit:{send:async(t,n)=>{let r=R.default.levels.values[this.logLevel];R.default.levels.values[t]&&r&&R.default.levels.values[t]>=r&&await fetch(`${e}/${t}`,{method:`POST`,headers:{"Content-Type":`application/json; charset=utf-8`},body:JSON.stringify({id:this.uuidGenerator(),method:t,params:n}),priority:`low`})}},write:z}});this.pinoInstance=n?t.child(n):t,this.pinoInstance.level=this.logLevel}}setLevel(e){this.logLevel=e,this.pinoInstance.level=e}info(...e){this.pinoInstance.info(e)}warn(...e){this.pinoInstance.warn(e)}error(...e){this.pinoInstance.error(e)}debug(...e){this.pinoInstance.debug(e)}child(t){let n=this.pinoInstance.child(t);return new e(this.endpoint,this.uuidGenerator,t,n)}},V=class{storeName;constructor(e){this.storeName=e}async setItem(e,t){let n=await globalThis.caches.open(this.storeName),r=new Response(JSON.stringify(t),{headers:{"Content-Type":`application/json; charset=utf-8`}}),i=new URL(e,location.origin),a=new Request(i.toString());await n.put(a,r)}async getItem(e){let t=await globalThis.caches.open(this.storeName),n=new URL(e,location.origin),r=await t.match(n.toString());return r?await r.json():{}}async removeItem(e){let t=await globalThis.caches.open(this.storeName),n=new URL(e,location.origin);return await t.delete(n.toString())}async clear(e){return await globalThis.caches.delete(e)}};export{D as a,d as c,P as i,i as l,B as n,b as o,I as r,y as s,V as t};